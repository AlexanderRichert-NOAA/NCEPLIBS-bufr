<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-bufr: closmg.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-bufr
   &#160;<span id="projectnumber">11.3.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('closmg_8f.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">closmg.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="closmg_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a3378111de0136710daec2ded25ed34e4"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="closmg_8f.html#a3378111de0136710daec2ded25ed34e4">closmg</a> (LUNIN)</td></tr>
<tr class="memdesc:a3378111de0136710daec2ded25ed34e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">THIS SUBROUTINE SHOULD ONLY BE CALLED WHEN LOGICAL UNIT ABS(LUNIN) HAS BEEN OPENED FOR OUTPUT OPERATIONS.  <a href="closmg_8f.html#a3378111de0136710daec2ded25ed34e4">More...</a><br /></td></tr>
<tr class="separator:a3378111de0136710daec2ded25ed34e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>WOOLLEN </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-01-06 </dd></dl>

<p class="definition">Definition in file <a class="el" href="closmg_8f_source.html">closmg.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a3378111de0136710daec2ded25ed34e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3378111de0136710daec2ded25ed34e4">&#9670;&nbsp;</a></span>closmg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine closmg </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>LUNIN</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>THIS SUBROUTINE SHOULD ONLY BE CALLED WHEN LOGICAL UNIT ABS(LUNIN) HAS BEEN OPENED FOR OUTPUT OPERATIONS. </p>
<p>IT CLOSES A BUFR MESSAGE PREVIOUSLY OPENED BY EITHER BUFR ARCHIVE LIBRARY SUBROUTINES OPENMG OR OPENMB AND WRITES IT TO THE UNIT ABS(LUNIN). SINCE OPENMG AND OPENMB NORMALLY CALL THIS INTERNALLY, IT IS NOT CALLED TOO OFTEN FROM AN APPLICATION PROGRAM.</p>
<p>PROGRAM HISTORY LOG: 1994-01-06 J. WOOLLEN &ndash; ORIGINAL AUTHOR 1998-07-08 J. WOOLLEN &ndash; REPLACED CALL TO CRAY LIBRARY ROUTINE "ABORT" WITH CALL TO NEW INTERNAL BUFRLIB ROUTINE "BORT" 1999-11-18 J. WOOLLEN &ndash; THE NUMBER OF BUFR FILES WHICH CAN BE OPENED AT ONE TIME INCREASED FROM 10 TO 32 (NECESSARY IN ORDER TO PROCESS MULTIPLE BUFR FILES UNDER THE MPI) 2000-09-19 J. WOOLLEN &ndash; MAXIMUM MESSAGE LENGTH INCREASED FROM 10,000 TO 20,000 BYTES 2003-05-19 J. WOOLLEN &ndash; CORRECTED A PROBLEM INTRODUCED IN A PREVIOUS (MAY 2002) IMPLEMENTATION WHICH PREVENTED THE DUMP CENTER TIME AND INTITIATION TIME MESSAGES FROM BEING WRITTEN OUT (THIS AFFECTED APPLICATION PROGRAM BUFR_DUMPMD, IF IT WERE RECOMPILED, IN THE DATA DUMPING PROCESS) 2003-11-04 S. BENDER &ndash; ADDED REMARKS/BUFRLIB ROUTINE INTERDEPENDENCIES 2003-11-04 D. KEYSER &ndash; UNIFIED/PORTABLE FOR WRF; ADDED DOCUMENTATION (INCLUDING HISTORY); OUTPUTS MORE COMPLETE DIAGNOSTIC INFO WHEN ROUTINE TERMINATES ABNORMALLY 2004-08-09 J. ATOR &ndash; MAXIMUM MESSAGE LENGTH INCREASED FROM 20,000 TO 50,000 BYTES 2005-05-26 D. KEYSER &ndash; ALLOWS OVERRIDE OF PREVIOUS LOGIC THAT HAD ALWAYS WRITTEN OUT MESSAGE NUMBERS 1 AND 2 EVEN WHEN THEY CONTAINED ZERO SUBSETS (ASSUMED THESE ARE DUMMIES, CONTAINING ONLY CENTER AND DUMP TIME) (NO OTHER EMPTY MESSAGES WERE WRITTEN OUT), DONE BY PASSING IN A NEGATIVE UNIT NUMBER ARGUMENT THE FIRST TIME THIS ROUTINE IS CALLED BY AN APPLICATION PROGRAM (ALL EMPTY MESSAGES ARE SKIPPED) (ASSUMES DUMMY MESSAGES ARE NOT IN INPUT FILE), NOTE: THIS REMAINS SET FOR THE PARTICULAR FILE BEING WRITTEN TO EACH TIME CLOSMG IS CALLED, REGARDLESS OF THE SIGN OF THE UNIT NUMBER - THIS IS NECESSARY BECAUSE THIS ROUTINE IS CALLED BY OTHER BUFRLIB ROUTINES WHICH ALWAYS PASS IN A POSITIVE UNIT NUMBER (THE APPLICATION PROGRAM SHOULD ALWAYS CALL CLOSMG WITH A NEGATIVE UNIT NUMBER IMMEDIATELY AFTER CALLING OPENBF FOR THIS OUTPUT FILE IF THE INTENTION IS TO NOT WRITE ANY EMPTY MESSAGES) 2014-12-10 J. ATOR &ndash; USE MODULES INSTEAD OF COMMON BLOCKS</p>
<p>USAGE: CALL CLOSMG (LUNIN) INPUT ARGUMENT LIST: LUNIN - INTEGER: ABSOLUTE VALUE IS FORTRAN LOGICAL UNIT NUMBER FOR BUFR FILE</p><ul>
<li>IF LUNIN IS GREATER THAN ZERO, THEN MESSAGE NUMBER 1 OR 2 IS WRITTEN OUT EVEN IF THE NUMBER OF SUBSETS WRITTEN INTO THE MESSAGE IS ZERO (THIS ALLOWS "DUMMY" MESSAGES CONTAINING DUMP CENTER AND INITIATION TIME TO BE COPIED), MESSAGE NUMBERS 3 AND HIGHER ARE NOT WRITTEN OUT IF THEY CONTAIN ZERO SUBSETS</li>
<li>IF LUNIN IS LESS THAN ZERO, THEN NO MESSAGES WITH ZERO SUBSETS WRITTEN INTO THEM ARE WRITTEN OUT FOR A PARTICULAR FILE BOTH IN THIS CALL AND IN ALL SUBSEQUENT CALLS TO THIS ROUTINE BY AN APPLICATION PROGRAM</li>
</ul>
<p>REMARKS: THIS ROUTINE CALLS: BORT MSGWRT STATUS WRCMPS WTSTAT THIS ROUTINE IS CALLED BY: CLOSBF MAKESTAB OPENMB OPENMG WRITSA Also called by application programs. </p>

<p class="definition">Definition at line <a class="el" href="closmg_8f_source.html#l00085">85</a> of file <a class="el" href="closmg_8f_source.html">closmg.f</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="closmg_8f.html">closmg.f</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
